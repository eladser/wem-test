#!/bin/bash\n\n# 🗄️ WEM Dashboard - SQLite Setup & Testing Script\n# Perfect for development, testing, and GitHub publishing!\n\nset -e  # Exit on any error\n\necho \"🗄️ WEM Dashboard SQLite Setup\"\necho \"================================\"\necho \"📦 Setting up SQLite for development and testing...\"\necho \"\"\n\n# Colors for output\nGREEN='\\033[0;32m'\nBLUE='\\033[0;34m'\nYELLOW='\\033[1;33m'\nRED='\\033[0;31m'\nNC='\\033[0m' # No Color\n\n# Check if .NET is installed\nif ! command -v dotnet &> /dev/null; then\n    echo -e \"${RED}❌ .NET 8.0 not found. Please install:${NC}\"\n    echo \"   📥 Download: https://dotnet.microsoft.com/download/dotnet/8.0\"\n    exit 1\nfi\n\necho -e \"${GREEN}✅ .NET $(dotnet --version) found${NC}\"\necho \"\"\n\necho -e \"${BLUE}🔧 Configuring SQLite database...${NC}\"\n\n# Ensure we're in the right directory\nif [ ! -d \"backend\" ]; then\n    echo -e \"${RED}❌ Please run this script from the project root directory${NC}\"\n    exit 1\nfi\n\ncd backend/src/WemDashboard.API\n\n# Create appsettings for SQLite\ncat > appsettings.Development.json << EOF\n{\n  \"Logging\": {\n    \"LogLevel\": {\n      \"Default\": \"Information\",\n      \"Microsoft.AspNetCore\": \"Warning\",\n      \"Microsoft.EntityFrameworkCore.Database.Command\": \"Information\"\n    }\n  },\n  \"ConnectionStrings\": {\n    \"DefaultConnection\": \"Data Source=wemdashboard-dev.db\"\n  },\n  \"DatabaseProvider\": \"SQLite\",\n  \"Jwt\": {\n    \"Key\": \"WemDashboard-SuperSecret-JWT-Key-For-Development-32Characters-Minimum\",\n    \"Issuer\": \"WemDashboard\",\n    \"Audience\": \"WemDashboard\",\n    \"ExpirationInMinutes\": 60\n  }\n}\nEOF\n\necho -e \"${GREEN}✅ SQLite configuration created${NC}\"\n\n# Install/restore packages\necho -e \"${BLUE}📦 Installing .NET packages...${NC}\"\ndotnet restore\n\necho -e \"${BLUE}🔨 Building the application...${NC}\"\ndotnet build --configuration Debug\n\necho \"\"\necho -e \"${GREEN}🗄️ SQLite Database Setup Complete!${NC}\"\necho \"===========================================\"\necho \"\"\necho -e \"${YELLOW}🚀 Next Steps:${NC}\"\necho \"\"\necho \"1. 🖥️  Start the Backend:\"\necho \"   dotnet run\"\necho \"\"\necho \"2. 🌐 Test the API:\"\necho \"   http://localhost:5000/swagger\"\necho \"\"\necho \"3. 🏠 Start Frontend (in new terminal, from project root):\"\necho \"   npm run dev\"\necho \"\"\necho \"4. 🔐 Login Credentials:\"\necho \"   Admin:    admin@wemdashboard.com    / Admin123!\"\necho \"   Manager:  manager@wemdashboard.com  / Manager123!\"\necho \"   Operator: operator@wemdashboard.com / Operator123!\"\necho \"   Viewer:   viewer@wemdashboard.com   / Viewer123!\"\necho \"   Demo:     demo@wemdashboard.com     / Demo123!\"\necho \"\"\necho -e \"${GREEN}📊 What's Pre-loaded:${NC}\"\necho \"   • 6 Energy Sites (California, Texas, Berlin, Tokyo, Australia, Scotland)\"\necho \"   • 10 Assets (Wind Turbines, Solar Panels, Inverters, Batteries)\"\necho \"   • 1,008 Hours of Power Data (7 days × 24 hours × 6 sites)\"\necho \"   • 7 Realistic Alerts (Success, Warning, Error, Info)\"\necho \"   • 5 User Accounts with different roles\"\necho \"\"\necho -e \"${GREEN}🗄️ SQLite Database:${NC}\"\necho \"   • File: wemdashboard-dev.db\"\necho \"   • Location: backend/src/WemDashboard.API/\"\necho \"   • Size: ~1MB with all sample data\"\necho \"   • GitHub Ready: Can be committed to repository\"\necho \"\"\necho -e \"${YELLOW}💡 Pro Tips:${NC}\"\necho \"   • Database persists between runs\"\necho \"   • Delete .db file to reset all data\"\necho \"   • Use SQLite Browser to view data\"\necho \"   • Perfect for development and testing\"\necho \"\"\necho -e \"${GREEN}✨ Happy Testing!${NC}\"\n\n# Go back to project root\ncd ../../../\n"