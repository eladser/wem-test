<Window x:Class=\"WemLogViewer.MainWindow\"\n        xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\"\n        xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\"\n        xmlns:local=\"clr-namespace:WemLogViewer\"\n        xmlns:behaviors=\"clr-namespace:WemLogViewer.Behaviors\"\n        Title=\"WEM Log Viewer\" Height=\"900\" Width=\"1400\" MinHeight=\"600\" MinWidth=\"1000\"\n        Icon=\"Resources/app.ico\" WindowStartupLocation=\"CenterScreen\">\n    \n    <Window.CommandBindings>\n        <CommandBinding Command=\"ApplicationCommands.Open\" Executed=\"OpenCommand_Executed\"/>\n        <CommandBinding Command=\"ApplicationCommands.Save\" Executed=\"SaveCommand_Executed\"/>\n        <CommandBinding Command=\"ApplicationCommands.Find\" Executed=\"FindCommand_Executed\"/>\n        <CommandBinding Command=\"local:CustomCommands.Refresh\" Executed=\"RefreshCommand_Executed\"/>\n        <CommandBinding Command=\"local:CustomCommands.ClearFilter\" Executed=\"ClearFilterCommand_Executed\"/>\n    </Window.CommandBindings>\n    \n    <Grid>\n        <Grid.RowDefinitions>\n            <RowDefinition Height=\"Auto\"/>\n            <RowDefinition Height=\"Auto\"/>\n            <RowDefinition Height=\"*\"/>\n            <RowDefinition Height=\"Auto\"/>\n        </Grid.RowDefinitions>\n        \n        <!-- Menu Bar -->\n        <Menu Grid.Row=\"0\">\n            <MenuItem Header=\"_File\">\n                <MenuItem Header=\"_Open Log File...\" Command=\"ApplicationCommands.Open\" InputGestureText=\"Ctrl+O\"/>\n                <MenuItem Header=\"Open _Directory...\" Click=\"OpenDirectory_Click\"/>\n                <MenuItem Header=\"Connect to _Database...\" Click=\"ConnectDatabase_Click\"/>\n                <Separator/>\n                <MenuItem Header=\"_Export Filtered Logs...\" Command=\"ApplicationCommands.Save\" InputGestureText=\"Ctrl+S\"/>\n                <Separator/>\n                <MenuItem Header=\"E_xit\" Click=\"Exit_Click\"/>\n            </MenuItem>\n            <MenuItem Header=\"_View\">\n                <MenuItem Header=\"_Refresh\" Command=\"local:CustomCommands.Refresh\" InputGestureText=\"F5\"/>\n                <MenuItem Header=\"_Auto Refresh\" IsCheckable=\"True\" Name=\"AutoRefreshMenuItem\" Click=\"AutoRefresh_Click\"/>\n                <Separator/>\n                <MenuItem Header=\"_Statistics\" Click=\"ShowStatistics_Click\"/>\n                <MenuItem Header=\"_Charts\" Click=\"ShowCharts_Click\"/>\n            </MenuItem>\n            <MenuItem Header=\"_Tools\">\n                <MenuItem Header=\"_Find\" Command=\"ApplicationCommands.Find\" InputGestureText=\"Ctrl+F\"/>\n                <MenuItem Header=\"_Clear Filters\" Command=\"local:CustomCommands.ClearFilter\"/>\n                <Separator/>\n                <MenuItem Header=\"_Settings\" Click=\"Settings_Click\"/>\n            </MenuItem>\n            <MenuItem Header=\"_Help\">\n                <MenuItem Header=\"_About\" Click=\"About_Click\"/>\n            </MenuItem>\n        </Menu>\n        \n        <!-- Toolbar -->\n        <ToolBar Grid.Row=\"1\">\n            <Button Command=\"ApplicationCommands.Open\" Content=\"Open\" ToolTip=\"Open log file (Ctrl+O)\"/>\n            <Button Command=\"local:CustomCommands.Refresh\" Content=\"Refresh\" ToolTip=\"Refresh logs (F5)\"/>\n            <Separator/>\n            <Button Command=\"ApplicationCommands.Find\" Content=\"Find\" ToolTip=\"Find in logs (Ctrl+F)\"/>\n            <Button Command=\"local:CustomCommands.ClearFilter\" Content=\"Clear Filters\" ToolTip=\"Clear all filters\"/>\n            <Separator/>\n            <Button Click=\"ShowStatistics_Click\" Content=\"Statistics\" ToolTip=\"Show log statistics\"/>\n            <Button Click=\"ShowCharts_Click\" Content=\"Charts\" ToolTip=\"Show log charts\"/>\n        </ToolBar>\n        \n        <!-- Main Content -->\n        <Grid Grid.Row=\"2\">\n            <Grid.ColumnDefinitions>\n                <ColumnDefinition Width=\"300\" MinWidth=\"250\"/>\n                <ColumnDefinition Width=\"5\"/>\n                <ColumnDefinition Width=\"*\" MinWidth=\"400\"/>\n            </Grid.ColumnDefinitions>\n            \n            <!-- Filter Panel -->\n            <Border Grid.Column=\"0\" Background=\"#f5f5f5\" BorderBrush=\"#ddd\" BorderThickness=\"0,0,1,0\">\n                <ScrollViewer VerticalScrollBarVisibility=\"Auto\">\n                    <StackPanel Margin=\"10\">\n                        <TextBlock Text=\"Filters\" FontWeight=\"Bold\" FontSize=\"14\" Margin=\"0,0,0,10\"/>\n                        \n                        <!-- Log Level Filter -->\n                        <Expander Header=\"Log Level\" IsExpanded=\"True\" Margin=\"0,0,0,10\">\n                            <StackPanel>\n                                <CheckBox Name=\"TraceCheckBox\" Content=\"Trace\" Margin=\"5\" Checked=\"Filter_Changed\" Unchecked=\"Filter_Changed\"/>\n                                <CheckBox Name=\"DebugCheckBox\" Content=\"Debug\" Margin=\"5\" Checked=\"Filter_Changed\" Unchecked=\"Filter_Changed\"/>\n                                <CheckBox Name=\"InfoCheckBox\" Content=\"Information\" IsChecked=\"True\" Margin=\"5\" Checked=\"Filter_Changed\" Unchecked=\"Filter_Changed\"/>\n                                <CheckBox Name=\"WarnCheckBox\" Content=\"Warning\" IsChecked=\"True\" Margin=\"5\" Checked=\"Filter_Changed\" Unchecked=\"Filter_Changed\"/>\n                                <CheckBox Name=\"ErrorCheckBox\" Content=\"Error\" IsChecked=\"True\" Margin=\"5\" Checked=\"Filter_Changed\" Unchecked=\"Filter_Changed\"/>\n                                <CheckBox Name=\"FatalCheckBox\" Content=\"Fatal\" IsChecked=\"True\" Margin=\"5\" Checked=\"Filter_Changed\" Unchecked=\"Filter_Changed\"/>\n                            </StackPanel>\n                        </Expander>\n                        \n                        <!-- Time Range Filter -->\n                        <Expander Header=\"Time Range\" IsExpanded=\"True\" Margin=\"0,0,0,10\">\n                            <StackPanel>\n                                <TextBlock Text=\"From:\" Margin=\"5,5,5,2\"/>\n                                <DatePicker Name=\"FromDatePicker\" Margin=\"5,0,5,5\" SelectedDateChanged=\"Filter_Changed\"/>\n                                <TextBlock Text=\"To:\" Margin=\"5,5,5,2\"/>\n                                <DatePicker Name=\"ToDatePicker\" Margin=\"5,0,5,5\" SelectedDateChanged=\"Filter_Changed\"/>\n                            </StackPanel>\n                        </Expander>\n                        \n                        <!-- Search Filter -->\n                        <Expander Header=\"Search\" IsExpanded=\"True\" Margin=\"0,0,0,10\">\n                            <StackPanel>\n                                <TextBox Name=\"SearchTextBox\" Margin=\"5\" \n                                         behaviors:TextBoxBehaviors.Watermark=\"Search in messages...\"\n                                         TextChanged=\"Filter_Changed\"/>\n                                <CheckBox Name=\"RegexCheckBox\" Content=\"Use Regex\" Margin=\"5\" Checked=\"Filter_Changed\" Unchecked=\"Filter_Changed\"/>\n                                <CheckBox Name=\"CaseSensitiveCheckBox\" Content=\"Case Sensitive\" Margin=\"5\" Checked=\"Filter_Changed\" Unchecked=\"Filter_Changed\"/>\n                            </StackPanel>\n                        </Expander>\n                        \n                        <!-- Component Filter -->\n                        <Expander Header=\"Component\" IsExpanded=\"False\" Margin=\"0,0,0,10\">\n                            <StackPanel>\n                                <ComboBox Name=\"ComponentComboBox\" Margin=\"5\" SelectionChanged=\"Filter_Changed\" IsEditable=\"True\"/>\n                            </StackPanel>\n                        </Expander>\n                        \n                        <!-- User Filter -->\n                        <Expander Header=\"User\" IsExpanded=\"False\" Margin=\"0,0,0,10\">\n                            <StackPanel>\n                                <ComboBox Name=\"UserComboBox\" Margin=\"5\" SelectionChanged=\"Filter_Changed\" IsEditable=\"True\"/>\n                            </StackPanel>\n                        </Expander>\n                        \n                        <!-- Quick Actions -->\n                        <Expander Header=\"Quick Actions\" IsExpanded=\"False\" Margin=\"0,0,0,10\">\n                            <StackPanel>\n                                <Button Content=\"Last Hour\" Margin=\"5\" Click=\"LastHour_Click\"/>\n                                <Button Content=\"Today\" Margin=\"5\" Click=\"Today_Click\"/>\n                                <Button Content=\"Errors Only\" Margin=\"5\" Click=\"ErrorsOnly_Click\"/>\n                                <Button Content=\"Clear All\" Margin=\"5\" Click=\"ClearFilters_Click\"/>\n                            </StackPanel>\n                        </Expander>\n                    </StackPanel>\n                </ScrollViewer>\n            </Border>\n            \n            <!-- Splitter -->\n            <GridSplitter Grid.Column=\"1\" HorizontalAlignment=\"Stretch\" Background=\"#ddd\"/>\n            \n            <!-- Log Content -->\n            <Grid Grid.Column=\"2\">\n                <Grid.RowDefinitions>\n                    <RowDefinition Height=\"*\"/>\n                    <RowDefinition Height=\"Auto\"/>\n                    <RowDefinition Height=\"200\" MinHeight=\"100\"/>\n                </Grid.RowDefinitions>\n                \n                <!-- Log List -->\n                <DataGrid Name=\"LogDataGrid\" Grid.Row=\"0\" \n                         AutoGenerateColumns=\"False\" \n                         IsReadOnly=\"True\" \n                         SelectionMode=\"Single\"\n                         GridLinesVisibility=\"Horizontal\"\n                         HeadersVisibility=\"Column\"\n                         CanUserAddRows=\"False\"\n                         CanUserDeleteRows=\"False\"\n                         RowHeaderWidth=\"0\"\n                         SelectionChanged=\"LogDataGrid_SelectionChanged\"\n                         MouseDoubleClick=\"LogDataGrid_MouseDoubleClick\">\n                    <DataGrid.Columns>\n                        <DataGridTextColumn Header=\"Level\" Binding=\"{Binding Level}\" Width=\"80\">\n                            <DataGridTextColumn.ElementStyle>\n                                <Style TargetType=\"TextBlock\">\n                                    <Style.Triggers>\n                                        <Trigger Property=\"Text\" Value=\"Error\">\n                                            <Setter Property=\"Foreground\" Value=\"Red\"/>\n                                            <Setter Property=\"FontWeight\" Value=\"Bold\"/>\n                                        </Trigger>\n                                        <Trigger Property=\"Text\" Value=\"Fatal\">\n                                            <Setter Property=\"Foreground\" Value=\"DarkRed\"/>\n                                            <Setter Property=\"FontWeight\" Value=\"Bold\"/>\n                                        </Trigger>\n                                        <Trigger Property=\"Text\" Value=\"Warning\">\n                                            <Setter Property=\"Foreground\" Value=\"Orange\"/>\n                                        </Trigger>\n                                        <Trigger Property=\"Text\" Value=\"Information\">\n                                            <Setter Property=\"Foreground\" Value=\"Blue\"/>\n                                        </Trigger>\n                                        <Trigger Property=\"Text\" Value=\"Debug\">\n                                            <Setter Property=\"Foreground\" Value=\"Gray\"/>\n                                        </Trigger>\n                                    </Style.Triggers>\n                                </Style>\n                            </DataGridTextColumn.ElementStyle>\n                        </DataGridTextColumn>\n                        <DataGridTextColumn Header=\"Timestamp\" Binding=\"{Binding Timestamp, StringFormat=yyyy-MM-dd HH:mm:ss.fff}\" Width=\"150\"/>\n                        <DataGridTextColumn Header=\"Component\" Binding=\"{Binding Component}\" Width=\"120\"/>\n                        <DataGridTextColumn Header=\"Message\" Binding=\"{Binding Message}\" Width=\"*\"/>\n                    </DataGrid.Columns>\n                </DataGrid>\n                \n                <!-- Details Splitter -->\n                <GridSplitter Grid.Row=\"1\" HorizontalAlignment=\"Stretch\" Height=\"5\" Background=\"#ddd\"/>\n                \n                <!-- Log Details Panel -->\n                <TabControl Grid.Row=\"2\" Name=\"DetailsTabControl\">\n                    <TabItem Header=\"Message Details\">\n                        <ScrollViewer>\n                            <TextBox Name=\"MessageDetailsTextBox\" \n                                   IsReadOnly=\"True\" \n                                   TextWrapping=\"Wrap\" \n                                   FontFamily=\"Consolas\" \n                                   FontSize=\"12\" \n                                   Background=\"#f9f9f9\"\n                                   Margin=\"5\"/>\n                        </ScrollViewer>\n                    </TabItem>\n                    <TabItem Header=\"Context\">\n                        <ScrollViewer>\n                            <TextBox Name=\"ContextTextBox\" \n                                   IsReadOnly=\"True\" \n                                   TextWrapping=\"Wrap\" \n                                   FontFamily=\"Consolas\" \n                                   FontSize=\"12\" \n                                   Background=\"#f9f9f9\"\n                                   Margin=\"5\"/>\n                        </ScrollViewer>\n                    </TabItem>\n                    <TabItem Header=\"Stack Trace\">\n                        <ScrollViewer>\n                            <TextBox Name=\"StackTraceTextBox\" \n                                   IsReadOnly=\"True\" \n                                   TextWrapping=\"Wrap\" \n                                   FontFamily=\"Consolas\" \n                                   FontSize=\"10\" \n                                   Background=\"#f9f9f9\"\n                                   Margin=\"5\"/>\n                        </ScrollViewer>\n                    </TabItem>\n                    <TabItem Header=\"Raw Log\">\n                        <ScrollViewer>\n                            <TextBox Name=\"RawLogTextBox\" \n                                   IsReadOnly=\"True\" \n                                   TextWrapping=\"Wrap\" \n                                   FontFamily=\"Consolas\" \n                                   FontSize=\"10\" \n                                   Background=\"#f9f9f9\"\n                                   Margin=\"5\"/>\n                        </ScrollViewer>\n                    </TabItem>\n                </TabControl>\n            </Grid>\n        </Grid>\n        \n        <!-- Status Bar -->\n        <StatusBar Grid.Row=\"3\">\n            <StatusBarItem>\n                <TextBlock Name=\"StatusTextBlock\" Text=\"Ready\"/>\n            </StatusBarItem>\n            <Separator/>\n            <StatusBarItem>\n                <TextBlock Name=\"LogCountTextBlock\" Text=\"0 logs\"/>\n            </StatusBarItem>\n            <Separator/>\n            <StatusBarItem>\n                <TextBlock Name=\"FilteredCountTextBlock\" Text=\"0 filtered\"/>\n            </StatusBarItem>\n            <StatusBarItem HorizontalAlignment=\"Right\">\n                <ProgressBar Name=\"LoadingProgressBar\" Width=\"200\" Height=\"16\" Visibility=\"Collapsed\"/>\n            </StatusBarItem>\n        </StatusBar>\n    </Grid>\n</Window>